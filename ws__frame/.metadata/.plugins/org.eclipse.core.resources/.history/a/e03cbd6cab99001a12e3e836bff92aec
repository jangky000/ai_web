package dev.mvc.member;
 
import org.json.JSONObject;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.servlet.ModelAndView;
 
@Controller
public class MemberCont {
  
  @Autowired
  @Qualifier("dev.mvc.member.MemberProc")
  private MemberProcInter memberProc;
  
  public MemberCont(){
    System.out.println("--> MemberCont created.");
  }
  
  //http://localhost:9090/resort/member/create.do
   /**
    * 등록 폼
    * @return
    */
   @RequestMapping(value="/member/create.do", method=RequestMethod.GET )
   public ModelAndView create() {
     ModelAndView mav = new ModelAndView();
     mav.setViewName("/member/create"); // webapp/member/create.jsp
     return mav;
   }
   
   //http://localhost:9090/resort/member/checkID.do?id=user
   /**
    * 아이디 중복 체크
    * @return
    */
   @ResponseBody
   @RequestMapping(value="/member/checkID.do", method=RequestMethod.GET, 
                               produces="text/plain;charset=UTF-8" ) // 한글 깨짐 방지
   public String checkID(String id) {
     int cnt = this.memberProc.checkId(id);
     JSONObject json = new JSONObject();
     json.put("cnt", cnt);
     return json.toString();
   }
   
}