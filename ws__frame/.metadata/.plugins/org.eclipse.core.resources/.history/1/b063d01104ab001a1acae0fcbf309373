DROP TABLE porder_detail CASCADE CONSTRAINTS;
DROP TABLE porder CASCADE CONSTRAINTS;
DROP TABLE item CASCADE CONSTRAINTS;


/**********************************/
/* Table Name: 상품 */
/**********************************/

CREATE TABLE item(
    itemno                          NUMBER(10)     NOT NULL    PRIMARY KEY
);

COMMENT ON TABLE item is '상품';
COMMENT ON COLUMN item.itemno is '상품no';

DROP SEQUENCE item_seq;
CREATE SEQUENCE item_seq
  START WITH 1              -- 시작 번호
  INCREMENT BY 1          -- 증가값
  MAXVALUE 9999999999 -- 최대값: 9999999 --> NUMBER(7) 대응
  CACHE 2                       -- 2번은 메모리에서만 계산
  NOCYCLE;                     -- 다시 1부터 생성되는 것을 방지

INSERT INTO item(itemno) VALUES (item_seq.nextval);
INSERT INTO item(itemno) VALUES (item_seq.nextval);
INSERT INTO item(itemno) VALUES (item_seq.nextval);

SELECT * FROM item;


/**********************************/
/* Table Name: 주문상세 */
/**********************************/
CREATE TABLE porder_detail(
		porder_detailno               		NUMBER(10)		 NOT NULL		 PRIMARY KEY,
		porderno                      		NUMBER(10)		 NOT NULL,
		itemno                        		NUMBER(10)		 NOT NULL,
		quantity                      		NUMBER(10)		 DEFAULT 1		 NOT NULL,
		item_price_sum                		NUMBER(10)		 DEFAULT 0		 NOT NULL,
		item_discount_sum             		NUMBER(10)		 NOT NULL,
		payment_price                 		NUMBER(10)		 NOT NULL,
  FOREIGN KEY (porderno) REFERENCES porder (porderno),
  FOREIGN KEY (porderno) REFERENCES porder (porderno)
);

COMMENT ON TABLE porder_detail is '주문상세';
COMMENT ON COLUMN porder_detail.porder_detailno is '주문상세no';
COMMENT ON COLUMN porder_detail.porderno is '주문no';
COMMENT ON COLUMN porder_detail.itemno is '상품no';
COMMENT ON COLUMN porder_detail.quantity is '수량';
COMMENT ON COLUMN porder_detail.item_price_sum is '판매가총액';
COMMENT ON COLUMN porder_detail.item_discount_sum is '할인총액';
COMMENT ON COLUMN porder_detail.payment_price is '최종결제액';
