/**********************************/
/* Table Name: 카테고리 그룹 */
/**********************************/
CREATE TABLE categrp(
		categrpno                     		NUMBER(10)		 NOT NULL,
		name                          		VARCHAR2(50)		 NOT NULL,
		seqno                         		NUMBER(7)		 DEFAULT 0		 NOT NULL,
		visible                       		CHAR(1)		 DEFAULT 'Y'		 NOT NULL,
		rdate                         		DATE		 NOT NULL
);

COMMENT ON TABLE categrp is '카테고리 그룹';
COMMENT ON COLUMN categrp.categrpno is '카테고리 그룹번호';
COMMENT ON COLUMN categrp.name is '이름';
COMMENT ON COLUMN categrp.seqno is '출력 순서';
COMMENT ON COLUMN categrp.visible is '출력 모드';
COMMENT ON COLUMN categrp.rdate is '그룹 생성일';


/**********************************/
/* Table Name: 카테고리 */
/**********************************/
CREATE TABLE category(
		categoryno                    		NUMBER(10)		 NOT NULL,
		categrpno                     		NUMBER(10)		 NULL 
);

COMMENT ON TABLE category is '카테고리';
COMMENT ON COLUMN category.categoryno is '카테고리 번호';
COMMENT ON COLUMN category.categrpno is '카테고리 그룹번호';


/**********************************/
/* Table Name: 회원 */
/**********************************/
CREATE TABLE member(
		memberno                      		NUMBER(10)		 NOT NULL
);

COMMENT ON TABLE member is '회원';
COMMENT ON COLUMN member.memberno is '회원 번호';


/**********************************/
/* Table Name: 컨텐츠 */
/**********************************/
CREATE TABLE contents(
		contentsno                    		NUMBER(10)		 NOT NULL,
		categoryno                    		NUMBER(10)		 NULL ,
		memberno                      		NUMBER(10)		 NULL 
);

COMMENT ON TABLE contents is '컨텐츠';
COMMENT ON COLUMN contents.contentsno is '컨텐츠 번호';
COMMENT ON COLUMN contents.categoryno is '카테고리 번호';
COMMENT ON COLUMN contents.memberno is '회원 번호';


/**********************************/
/* Table Name: 첨부파일 */
/**********************************/
CREATE TABLE attachfile(
		attachfileno                  		NUMBER(10)		 NOT NULL,
		contentsno                    		NUMBER(10)		 NULL 
);

COMMENT ON TABLE attachfile is '첨부파일';
COMMENT ON COLUMN attachfile.attachfileno is '첨부파일 번호';
COMMENT ON COLUMN attachfile.contentsno is '컨텐츠 번호';


/**********************************/
/* Table Name: 댓글 */
/**********************************/
CREATE TABLE reply(
		replyno                       		NUMBER(10)		 NOT NULL,
		contentsno                    		NUMBER(10)		 NULL ,
		memberno                      		NUMBER(10)		 NULL 
);

COMMENT ON TABLE reply is '댓글';
COMMENT ON COLUMN reply.replyno is '댓글 번호';
COMMENT ON COLUMN reply.contentsno is '컨텐츠 번호';
COMMENT ON COLUMN reply.memberno is '회원 번호';


/**********************************/
/* Table Name: 로그인 내역 */
/**********************************/
CREATE TABLE login(
		loginno                       		NUMBER(10)		 NOT NULL,
		memberno                      		NUMBER(10)		 NULL 
);

COMMENT ON TABLE login is '로그인 내역';
COMMENT ON COLUMN login.loginno is '로그인 내역 번호';
COMMENT ON COLUMN login.memberno is '회원 번호';



ALTER TABLE categrp ADD CONSTRAINT IDX_categrp_PK PRIMARY KEY (categrpno);

ALTER TABLE category ADD CONSTRAINT IDX_category_PK PRIMARY KEY (categoryno);
ALTER TABLE category ADD CONSTRAINT IDX_category_FK0 FOREIGN KEY (categrpno) REFERENCES categrp (categrpno);

ALTER TABLE member ADD CONSTRAINT IDX_member_PK PRIMARY KEY (memberno);

ALTER TABLE contents ADD CONSTRAINT IDX_contents_PK PRIMARY KEY (contentsno);
ALTER TABLE contents ADD CONSTRAINT IDX_contents_FK0 FOREIGN KEY (categoryno) REFERENCES category (categoryno);
ALTER TABLE contents ADD CONSTRAINT IDX_contents_FK1 FOREIGN KEY (memberno) REFERENCES member (memberno);

ALTER TABLE attachfile ADD CONSTRAINT IDX_attachfile_PK PRIMARY KEY (attachfileno);
ALTER TABLE attachfile ADD CONSTRAINT IDX_attachfile_FK0 FOREIGN KEY (contentsno) REFERENCES contents (contentsno);

ALTER TABLE reply ADD CONSTRAINT IDX_reply_PK PRIMARY KEY (replyno);
ALTER TABLE reply ADD CONSTRAINT IDX_reply_FK0 FOREIGN KEY (contentsno) REFERENCES contents (contentsno);
ALTER TABLE reply ADD CONSTRAINT IDX_reply_FK1 FOREIGN KEY (memberno) REFERENCES member (memberno);

ALTER TABLE login ADD CONSTRAINT IDX_login_PK PRIMARY KEY (loginno);
ALTER TABLE login ADD CONSTRAINT IDX_login_FK0 FOREIGN KEY (memberno) REFERENCES member (memberno);

