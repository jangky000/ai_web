<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace = "dev.mvc.coupon_issue.Coupon_issueDAOInter">
  <!-- 쿠폰 발급 등록: 발급 기준일 한달 이내 사용 -->
  <insert id="create" parameterType="Coupon_issueVO">
    INSERT INTO coupon_issue(coupon_issueno, memno, couponno, cpcnt, cpissue, cpexpired, cpstatus)
    VALUES(coupon_issue_seq.nextval, ${memno}, ${couponno}, ${cpcnt}, sysdate, add_months(sysdate,1), ${cpstatus})
  </insert>
  
  <!-- 쿠폰 발급 목록 -->
  <select id="list" resultType="Coupon_issueVO">
    SELECT coupon_issueno, memno, couponno, cpcnt, cpissue, cpexpired, cpstatus
    FROM coupon_issue
    ORDER BY coupon_issueno DESC
  </select>
  
  <!-- 쿠폰 페이징 -->
  
  <!-- 쿠폰 발급 조회 -->
  <select id="read" resultType="Coupon_issueVO" parameterType="int">
    SELECT coupon_issueno, memno, couponno, cpcnt, cpissue, cpexpired, cpstatus
    FROM coupon_issue
    WHERE coupon_issueno=${coupon_issueno}
  </select>  
  
  <!-- 쿠폰 발급 삭제: 삭제 사용 안함-->
  <delete id="delete" parameterType="int">
    DELETE FROM coupon_issue
    WHERE coupon_issueno = ${coupon_issueno}
  </delete>
  
</mapper> 